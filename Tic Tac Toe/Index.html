<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tic Tac Toe (by Priyanshu)</title>
  <link rel="icon" type="image/png" href="Priyanshu.png">
  <style>
    :root {
      --bg: #0b0f14;
      --panel: #111827;
      --accent: #60a5fa;
      --accent-2: #34d399;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --warn: #fbbf24;
      --x: #f87171;
      --o: #34d399;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 10% -10%, #1f2937 0%, transparent 60%) ,
                  radial-gradient(1000px 700px at 110% 110%, #0f172a 0%, transparent 55%),
                  var(--bg);
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .card {
      width: min(720px, 92vw);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 24px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
      padding: 20px 20px 24px;
      backdrop-filter: blur(6px);
    }
    .header { display: flex; align-items: center; gap: 12px; }
    .logo {
      width: 40px; height: 40px; border-radius: 12px;
      display: grid; place-items: center;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #001018; font-weight: 900; letter-spacing: 0.5px;
      text-shadow: 0 1px 0 rgba(255,255,255,0.5);
    }
    h1 { font-size: 1.25rem; margin: 0; }
    .sub { color: var(--muted); font-size: 0.9rem; }

    .row { display: flex; gap: 12px; flex-wrap: wrap; align-items: center; }
    .topbar { margin: 16px 0 8px; justify-content: space-between; }
    .group { display: flex; gap: 8px; align-items: center; }

    select, button, .toggle {
      background: #0f172a;
      color: var(--text);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px;
      padding: 10px 12px;
      font: inherit;
      cursor: pointer;
    }
    button { transition: transform 0.04s ease, box-shadow 0.2s ease; }
    button:active { transform: translateY(1px); }
    button:focus-visible, .cell:focus-visible { outline: 3px solid rgba(96,165,250,0.6); outline-offset: 2px; }

    .status { color: var(--warn); font-weight: 600; }

    .board {
      margin-top: 12px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 20px;
      padding: 12px;
    }
    .cell {
      width: 28vmin; max-width: 180px; aspect-ratio: 1/1;
      display: grid; place-items: center;
      border-radius: 16px;
      background: #0b1220;
      border: 1px solid rgba(255,255,255,0.08);
      font-size: clamp(40px, 8vmin, 72px);
      font-weight: 800;
      letter-spacing: 2px;
      user-select: none;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.06s ease;
    }
    .cell:hover { background: #0e1628; }
    .cell[disabled] { cursor: not-allowed; opacity: 0.7; }
    .cell.x { color: var(--x); text-shadow: 0 6px 18px rgba(248,113,113,0.25); }
    .cell.o { color: var(--o); text-shadow: 0 6px 18px rgba(52,211,153,0.2); }
    .cell.win { box-shadow: 0 0 0 2px rgba(255,255,255,0.08) inset, 0 0 22px 4px rgba(52,211,153,0.28); }

    .controls { margin-top: 14px; justify-content: space-between; }

    .score {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 8px; margin-top: 10px;
    }
    .badge {
      background: #0f172a; border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px; padding: 8px 10px; text-align: center;
      color: var(--muted);
    }
    .badge strong { color: var(--text); }

    @media (max-width: 560px) {
      .topbar, .controls { flex-direction: column; align-items: stretch; }
      .group { justify-content: space-between; }
      .cell { max-width: none; }
    }
  </style>
</head>
<body>
  <main class="card" aria-labelledby="title">
    <div class="header">
      <div class="logo" aria-hidden="true">TTT</div>
      <div>
        <h1 id="title">Tic Tac Toe</h1>
        <div class="sub">Play locally vs a friend or the computer.</div>
      </div>
    </div>

    <div class="row topbar">
      <div class="group">
        <label for="mode">Mode</label>
        <select id="mode" aria-label="Game mode">
          <option value="pvp">2 Players</option>
          <option value="ai">Vs Computer</option>
        </select>
      </div>
      <div class="group">
        <span class="status" id="status">X to move</span>
      </div>
    </div>

    <section class="board" role="grid" aria-label="Tic Tac Toe board">
      <!-- 9 cells -->
      <button class="cell" data-idx="0" aria-label="Cell 1"></button>
      <button class="cell" data-idx="1" aria-label="Cell 2"></button>
      <button class="cell" data-idx="2" aria-label="Cell 3"></button>
      <button class="cell" data-idx="3" aria-label="Cell 4"></button>
      <button class="cell" data-idx="4" aria-label="Cell 5"></button>
      <button class="cell" data-idx="5" aria-label="Cell 6"></button>
      <button class="cell" data-idx="6" aria-label="Cell 7"></button>
      <button class="cell" data-idx="7" aria-label="Cell 8"></button>
      <button class="cell" data-idx="8" aria-label="Cell 9"></button>
    </section>

    <div class="row controls">
      <div class="group">
        <button id="reset">Reset</button>
        <button id="swap">Swap First Player</button>
      </div>
      <div class="group">
        <div class="badge">X: <strong id="sx">0</strong></div>
        <div class="badge">O: <strong id="so">0</strong></div>
        <div class="badge">Draws: <strong id="sd">0</strong></div>
      </div>
    </div>
  </main>

  <script>
    (function(){
      const cells = Array.from(document.querySelectorAll('.cell'));
      const statusEl = document.getElementById('status');
      const resetBtn = document.getElementById('reset');
      const swapBtn = document.getElementById('swap');
      const modeSel = document.getElementById('mode');
      const scoreX = document.getElementById('sx');
      const scoreO = document.getElementById('so');
      const scoreD = document.getElementById('sd');

      const WINS = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];

      let board, player, active, first = 'X', mode = 'pvp';
      let scores = { X:0, O:0, D:0 };

      function init(){
        board = Array(9).fill('');
        player = first;
        active = true;
        cells.forEach(c => {
          c.textContent = '';
          c.className = 'cell';
          c.disabled = false;
        });
        updateStatus(`${player} to move`);
        if(mode==='ai' && player==='O') aiTurn();
      }

      function updateStatus(text){ statusEl.textContent = text; }

      function handleClick(e){
        const idx = +e.currentTarget.dataset.idx;
        if(!active || board[idx]) return;
        move(idx, player);
        const outcome = evaluate();
        if(outcome) return finish(outcome);
        swapPlayer();
        if(mode==='ai' && active && player==='O')
          setTimeout(aiTurn, 220);
      }

      function move(idx, mark){
        board[idx] = mark;
        const cell = cells[idx];
        cell.textContent = mark;
        cell.classList.add(mark.toLowerCase());
        cell.disabled = true;
      }

      function evaluate(){
        for(const [a,b,c] of WINS){
          if(board[a] && board[a]===board[b] && board[a]===board[c]){
            cells[a].classList.add('win');
            cells[b].classList.add('win');
            cells[c].classList.add('win');
            return board[a]; // 'X' or 'O'
          }
        }
        if(board.every(Boolean)) return 'D';
        return null;
      }

      function finish(result){
        active = false;
        cells.forEach(c => c.disabled = true);
        if(result==='D'){
          updateStatus('Game drawn');
          scores.D++;
          scoreD.textContent = scores.D;
        } else {
          updateStatus(`${result} wins!`);
          scores[result]++;
          (result==='X'?scoreX:scoreO).textContent = scores[result];
        }
      }

      function swapPlayer(){
        player = (player==='X') ? 'O' : 'X';
        updateStatus(`${player} to move`);
      }

      function aiTurn(){
        if(!active) return;
        // Simple, strong AI: win, block, center, corner, side
        const me='O', opp='X';
        const empty = board.map((v,i)=> v?null:i).filter(v=>v!==null);

        const pick = (list)=> list.find(i=> empty.includes(i));

        // 1) Winning move
        for(const [a,b,c] of WINS){
          const line=[a,b,c].map(i=>board[i]);
          if(line.filter(v=>v===me).length===2 && line.includes('')){
            const i=[a,b,c][line.indexOf('')];
            return moveAndEval(i);
          }
        }
        // 2) Block opponent
        for(const [a,b,c] of WINS){
          const line=[a,b,c].map(i=>board[i]);
          if(line.filter(v=>v===opp).length===2 && line.includes('')){
            const i=[a,b,c][line.indexOf('')];
            return moveAndEval(i);
          }
        }
        // 3) Center
        if(empty.includes(4)) return moveAndEval(4);
        // 4) Corners
        const corners = [0,2,6,8];
        const cPick = pick(corners);
        if(cPick!==undefined) return moveAndEval(cPick);
        // 5) Sides
        const sides = [1,3,5,7];
        const sPick = pick(sides);
        if(sPick!==undefined) return moveAndEval(sPick);

        function moveAndEval(i){
          move(i, me);
          const out = evaluate();
          if(out) return finish(out);
          swapPlayer();
        }
      }

      // Events
      cells.forEach(c => c.addEventListener('click', handleClick));
      resetBtn.addEventListener('click', init);
      swapBtn.addEventListener('click', () => { first = first==='X' ? 'O' : 'X'; init(); });
      modeSel.addEventListener('change', (e)=>{ mode = e.target.value; init(); });

      // Optional: number keys 1..9 map to cells left->right, top->bottom
      window.addEventListener('keydown', (e)=>{
        if(e.key>='1' && e.key<='9'){
          const idx = parseInt(e.key,10)-1;
          if(active && !board[idx]) cells[idx].click();
        }
      });

      // Boot
      init();
    })();
  </script>
</body>
</html>